module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},79826,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(8876);function d(){return Date.now()}async function e(a){var e,f;let g=(0,c.firestoreDb)(),h=(0,b.doc)(g,"users",a.uid),i=await (0,b.getDoc)(h);if(!i.exists()){let c=(e=a.uid,`ws_${e}`),f=(0,b.doc)(g,"workspaces",c);return await (0,b.setDoc)(f,{id:c,name:`${a.displayName??"My"} Workspace`,createdAt:d(),updatedAt:d()}),await (0,b.setDoc)((0,b.doc)(g,"workspaces",c,"members",a.uid),{uid:a.uid,role:"owner",createdAt:d()}),await (0,b.setDoc)(h,{uid:a.uid,email:a.email??null,displayName:a.displayName??null,photoURL:a.photoURL??null,defaultWorkspaceId:c,createdAt:d(),updatedAt:d()}),{defaultWorkspaceId:c}}let j=i.data();if(!j.defaultWorkspaceId){let c=(f=a.uid,`ws_${f}`);return await (0,b.updateDoc)(h,{defaultWorkspaceId:c,updatedAt:d()}),{defaultWorkspaceId:c}}return{defaultWorkspaceId:j.defaultWorkspaceId}}async function f(a){let d=(0,c.firestoreDb)(),e=(0,b.query)((0,b.collection)(d,"workspaces",a,"instances"),(0,b.limit)(1));return!(await (0,b.getDocs)(e)).empty}a.s(["ensureUserAndWorkspace",()=>e,"workspaceHasInstance",()=>f])},69583,a=>{"use strict";var b=a.i(72131);a.i(30485),a.i(31052),a.i(8876),a.i(79826);function c(){let[a,c]=(0,b.useState)(()=>"ws_e2e_user"),[d,e]=(0,b.useState)(()=>!0);return(0,b.useEffect)(()=>{},[]),{workspaceId:a,authReady:d}}a.s(["useWorkspace",()=>c])},84617,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(8876);function d(a){let d=(0,c.firestoreDb)();return(0,b.collection)(d,"workspaces",a,"boards")}async function e(a){let c=(0,b.query)(d(a),(0,b.orderBy)("createdAt","desc"));return(await (0,b.getDocs)(c)).docs.map(a=>({id:a.id,...a.data()}))}async function f(a,c){return(await (0,b.addDoc)(d(a),{...c,createdAt:Date.now(),updatedAt:Date.now()})).id}async function g(a,d,e){let f=(0,c.firestoreDb)();await (0,b.updateDoc)((0,b.doc)(f,"workspaces",a,"boards",d),{...e,updatedAt:Date.now()})}a.s(["createBoard",()=>f,"listBoards",()=>e,"updateBoard",()=>g])},1619,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({open:a,title:d,children:e,onClose:f}){return((0,c.useEffect)(()=>{function b(a){"Escape"===a.key&&f()}return a&&window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[a,f]),a)?(0,b.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60",onClick:f}),(0,b.jsx)("div",{className:"absolute inset-0 p-4 sm:p-6 flex items-end sm:items-center justify-center",children:(0,b.jsxs)("div",{className:"w-full max-w-lg panel p-5 rounded-2xl shadow-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("div",{className:"text-lg font-extrabold",children:d}),(0,b.jsx)("button",{onClick:f,"aria-label":"Close",className:"w-9 h-9 grid place-items-center rounded-xl border border-[color:var(--stroke)] bg-[rgba(22,26,34,.55)] text-[color:var(--muted)] hover:text-white",children:(0,b.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("path",{d:"M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,b.jsx)("path",{d:"M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})})]}),(0,b.jsx)("div",{className:"mt-4",children:e})]})})]}):null}a.s(["Modal",()=>d])},13087,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(50944),f=a.i(97454),g=a.i(1619);a.i(69387);var h=a.i(60574),i=a.i(8876);async function j(a){let b=(0,i.firestoreDb)();return(await (0,h.getDocs)((0,h.collection)(b,"workspaces",a,"instances"))).docs.map(a=>({id:a.id,...a.data()}))}var k=a.i(84617),l=a.i(69583);function m(){let a=(0,e.useRouter)(),{workspaceId:h,authReady:i}=(0,l.useWorkspace)(),[m,n]=(0,d.useState)([]),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(""),[s,t]=(0,d.useState)(""),[u,v]=(0,d.useState)([]),[w,x]=(0,d.useState)(""),[y,z]=(0,d.useState)(!1);async function A(){if(i&&(p(!0),r(""),t(""),v([]),x(""),h)){z(!0);try{let a=await j(h);v(a),1===a.length&&x(a[0].id)}finally{z(!1)}}}async function B(){let a=q.trim();a&&h&&(await (0,k.createBoard)(h,{name:a,description:s.trim()||void 0,instanceId:w||void 0}),p(!1))}(0,d.useEffect)(()=>{if(!i)return;if(!h)return void a.replace("/sign-in");let b=!1;return(async()=>{let a=await (0,k.listBoards)(h);b||n(a.map(a=>({id:a.id,name:a.name,description:a.description,instanceId:a.instanceId,createdAt:a.createdAt,updatedAt:a.updatedAt})))})().catch(()=>{}),()=>{b=!0}},[i,h,a]);let C=(0,d.useMemo)(()=>m,[m]);return(0,b.jsxs)(f.NavShell,{title:"Boards",children:[(0,b.jsx)("div",{className:"flex items-center justify-end",children:(0,b.jsx)("button",{onClick:()=>void A(),className:"btn-primary px-4 py-2 rounded-xl font-extrabold",children:"+ New"})}),(0,b.jsx)("div",{className:"mt-4 grid gap-3",children:C.length?C.map(a=>(0,b.jsxs)(c.default,{href:`/board/${encodeURIComponent(a.id)}`,className:"panel p-4 flex items-center justify-between hover:opacity-95",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-extrabold",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-[color:var(--muted)]",children:a.description||"—"})]}),(0,b.jsx)("div",{className:"chip",children:"Open"})]},a.id)):(0,b.jsxs)("div",{className:"panel p-6",children:[(0,b.jsx)("div",{className:"font-extrabold",children:"No boards yet"}),(0,b.jsx)("div",{className:"mt-2 text-sm text-[color:var(--muted)]",children:"Create a board to define scope + which OpenClaw instance runs tasks for it."}),(0,b.jsx)("button",{onClick:()=>void A(),className:"mt-4 btn-primary px-4 py-3 rounded-2xl font-extrabold",children:"Create your first board"})]})}),(0,b.jsxs)(g.Modal,{open:o,title:"Create board",onClose:()=>p(!1),children:[(0,b.jsx)("div",{className:"text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold",children:"Name"}),(0,b.jsx)("input",{value:q,onChange:a=>r(a.target.value),className:"mt-1 w-full rounded-2xl bg-[rgba(11,12,15,.7)] border border-[color:var(--stroke)] p-3 outline-none",placeholder:"e.g., Client sites"}),(0,b.jsx)("div",{className:"mt-4 text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold",children:"Scope / description"}),(0,b.jsx)("textarea",{value:s,onChange:a=>t(a.target.value),className:"mt-1 w-full min-h-[90px] rounded-2xl bg-[rgba(11,12,15,.7)] border border-[color:var(--stroke)] p-3 outline-none",placeholder:"What is this board for?"}),(0,b.jsx)("div",{className:"mt-4 text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold",children:"Bot instance"}),(0,b.jsxs)("select",{value:w,onChange:a=>x(a.target.value),disabled:y||0===u.length,className:"mt-1 w-full rounded-2xl bg-[rgba(11,12,15,.7)] border border-[color:var(--stroke)] p-3 outline-none disabled:opacity-50",children:[(0,b.jsx)("option",{value:"",children:y?"Loading…":u.length?"Select a bot…":"No bots connected yet"}),u.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name||a.id},a.id))]}),(0,b.jsx)("button",{onClick:()=>void B(),className:"mt-4 w-full btn-primary px-4 py-3 rounded-2xl font-extrabold",children:"Create board"})]})]})}a.s(["default",()=>m],13087)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__63f69e7d._.js.map