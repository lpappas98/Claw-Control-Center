module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},79826,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(8876);function d(){return Date.now()}async function e(a){var e,f;let g=(0,c.firestoreDb)(),h=(0,b.doc)(g,"users",a.uid),i=await (0,b.getDoc)(h);if(!i.exists()){let c=(e=a.uid,`ws_${e}`),f=(0,b.doc)(g,"workspaces",c);return await (0,b.setDoc)(f,{id:c,name:`${a.displayName??"My"} Workspace`,createdAt:d(),updatedAt:d()}),await (0,b.setDoc)((0,b.doc)(g,"workspaces",c,"members",a.uid),{uid:a.uid,role:"owner",createdAt:d()}),await (0,b.setDoc)(h,{uid:a.uid,email:a.email??null,displayName:a.displayName??null,photoURL:a.photoURL??null,defaultWorkspaceId:c,createdAt:d(),updatedAt:d()}),{defaultWorkspaceId:c}}let j=i.data();if(!j.defaultWorkspaceId){let c=(f=a.uid,`ws_${f}`);return await (0,b.updateDoc)(h,{defaultWorkspaceId:c,updatedAt:d()}),{defaultWorkspaceId:c}}return{defaultWorkspaceId:j.defaultWorkspaceId}}async function f(a){let d=(0,c.firestoreDb)(),e=(0,b.query)((0,b.collection)(d,"workspaces",a,"instances"),(0,b.limit)(1));return!(await (0,b.getDocs)(e)).empty}a.s(["ensureUserAndWorkspace",()=>e,"workspaceHasInstance",()=>f])},24895,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(8876);async function d(a){let d,e,f=(0,c.firestoreDb)(),g=(d=Math.random().toString(36).slice(2,6).toUpperCase(),e=Math.random().toString(36).slice(2,6).toUpperCase(),`${d}-${e}`);return{id:(await (0,b.addDoc)((0,b.collection)(f,"workspaces",a,"pairingRequests"),{code:g,status:"pending",createdAt:Date.now(),updatedAt:Date.now()})).id,code:g}}a.s(["createPairingRequest",()=>d])},4821,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(69387);var e=a.i(60574),f=a.i(8876),g=a.i(79826),h=a.i(24895),i=a.i(97454);function j(){let a=(0,d.useRouter)(),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null);async function r(){if(!l)return;let{id:b,code:c}=await (0,h.createPairingRequest)(l);o(c),q("pending");let d=(0,f.firestoreDb)();return(0,e.onSnapshot)((0,e.doc)(d,"workspaces",l,"pairingRequests",b),b=>{let c=b.data();c?.status&&(("pending"===c.status||"approved"===c.status||"rejected"===c.status||"expired"===c.status)&&q(c.status),"approved"===c.status&&a.replace("/boards"))})}return((0,c.useEffect)(()=>{(async()=>{let b=(0,f.firebaseAuth)().currentUser;if(!b)return a.replace("/sign-in");let{defaultWorkspaceId:c}=await (0,g.ensureUserAndWorkspace)(b);m(c),k(!1)})()},[a]),j)?(0,b.jsx)("main",{className:"min-h-screen flex items-center justify-center p-6",children:(0,b.jsx)("div",{className:"panel p-4 text-[color:var(--muted)]",children:"Loading…"})}):(0,b.jsx)(i.NavShell,{title:"Connect Bot",showNav:!1,children:(0,b.jsxs)("div",{className:"panel p-5",children:[(0,b.jsx)("div",{className:"text-sm text-[color:var(--muted)]",children:"Secure pairing"}),(0,b.jsx)("div",{className:"mt-1 text-xl font-extrabold",children:"Generate a pairing code"}),(0,b.jsx)("div",{className:"mt-2 text-sm text-[color:var(--muted)]",children:"This avoids pasting secrets. You’ll approve the code inside your OpenClaw instance."}),n?(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold",children:"Pairing code"}),(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"text-3xl font-black tracking-wider",children:n}),(0,b.jsx)("button",{"aria-label":"Copy pairing code",title:"Copy",onClick:async()=>{try{await navigator.clipboard.writeText(n)}catch{}},className:"w-10 h-10 grid place-items-center rounded-xl border border-[color:var(--stroke)] bg-[rgba(22,26,34,.55)] text-[color:var(--muted)] hover:text-white",children:(0,b.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("path",{d:"M9 9h10v10H9V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,b.jsx)("path",{d:"M5 15H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})})]}),(0,b.jsx)("div",{className:"mt-2 text-sm text-[color:var(--muted)]",children:"In OpenClaw: approve this request (we’ll add the exact “Approve” UI next)."}),(0,b.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:`chip ${"approved"===p?"chip-red":""}`,children:["Status: ",p]}),(0,b.jsx)("button",{onClick:()=>{o(null),q(null)},className:"px-4 py-2 rounded-xl border border-[color:var(--stroke)] bg-[rgba(22,26,34,.55)] font-bold",children:"New code"})]})]}):(0,b.jsx)("button",{onClick:r,className:"mt-4 w-full btn-primary px-4 py-3 rounded-2xl font-extrabold",children:"Generate code"})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ab29bf15._.js.map