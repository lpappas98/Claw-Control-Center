{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../src/lib/firebase/onboarding.ts","../../../../src/lib/firebase/useWorkspace.ts","../../../../src/lib/firebase/cards.ts","../../../../src/lib/firebase/cardsLive.ts","../../../../src/app/board/%5BboardId%5D/task/%5BtaskId%5D/page.tsx","../../../../src/lib/approval.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","import { collection, doc, getDoc, getDocs, limit, query, setDoc, updateDoc } from 'firebase/firestore';\nimport type { User } from 'firebase/auth';\nimport { firestoreDb } from './client';\n\nfunction now() {\n  return Date.now();\n}\n\nfunction wid(uid: string) {\n  return `ws_${uid}`;\n}\n\nexport async function ensureUserAndWorkspace(user: User) {\n  const db = firestoreDb();\n  const userRef = doc(db, 'users', user.uid);\n  const userSnap = await getDoc(userRef);\n\n  if (!userSnap.exists()) {\n    const wsId = wid(user.uid);\n    const wsRef = doc(db, 'workspaces', wsId);\n\n    await setDoc(wsRef, {\n      id: wsId,\n      name: `${user.displayName ?? 'My'} Workspace`,\n      createdAt: now(),\n      updatedAt: now(),\n    });\n\n    await setDoc(doc(db, 'workspaces', wsId, 'members', user.uid), {\n      uid: user.uid,\n      role: 'owner',\n      createdAt: now(),\n    });\n\n    await setDoc(userRef, {\n      uid: user.uid,\n      email: user.email ?? null,\n      displayName: user.displayName ?? null,\n      photoURL: user.photoURL ?? null,\n      defaultWorkspaceId: wsId,\n      createdAt: now(),\n      updatedAt: now(),\n    });\n\n    return { defaultWorkspaceId: wsId };\n  }\n\n  const data = userSnap.data() as { defaultWorkspaceId?: string };\n  if (!data.defaultWorkspaceId) {\n    const wsId = wid(user.uid);\n    await updateDoc(userRef, { defaultWorkspaceId: wsId, updatedAt: now() });\n    return { defaultWorkspaceId: wsId };\n  }\n\n  return { defaultWorkspaceId: data.defaultWorkspaceId };\n}\n\nexport async function workspaceHasInstance(workspaceId: string): Promise<boolean> {\n  const db = firestoreDb();\n  const q = query(collection(db, 'workspaces', workspaceId, 'instances'), limit(1));\n  const snap = await getDocs(q);\n  return !snap.empty;\n}\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { firebaseAuth } from './client';\nimport { ensureUserAndWorkspace } from './onboarding';\n\nfunction isE2EBypass() {\n  // Allow E2E bypass even under next start (NODE_ENV=production) *only* when explicitly enabled.\n  if (process.env.NODE_ENV === 'production' && process.env.NEXT_PUBLIC_E2E_BYPASS_AUTH !== '1') return false;\n  if (process.env.NEXT_PUBLIC_E2E_BYPASS_AUTH === '1') return true;\n  if (typeof window !== 'undefined') {\n    try {\n      return new URLSearchParams(window.location.search).get('e2e') === '1';\n    } catch {\n      return false;\n    }\n  }\n  return false;\n}\n\nexport function useWorkspace() {\n  const [workspaceId, setWorkspaceId] = useState<string | null>(() => (isE2EBypass() ? 'ws_e2e_user' : null));\n  const [authReady, setAuthReady] = useState<boolean>(() => (isE2EBypass() ? true : false));\n\n  useEffect(() => {\n    if (isE2EBypass()) return;\n\n    const unsub = onAuthStateChanged(firebaseAuth(), async (user) => {\n      if (!user) {\n        setWorkspaceId(null);\n        setAuthReady(true);\n        return;\n      }\n      const { defaultWorkspaceId } = await ensureUserAndWorkspace(user);\n      setWorkspaceId(defaultWorkspaceId);\n      setAuthReady(true);\n    });\n    return () => unsub();\n  }, []);\n\n  return { workspaceId, authReady };\n}\n","import { addDoc, collection, deleteDoc, doc, getDocs, orderBy, query, updateDoc } from 'firebase/firestore';\nimport { firestoreDb } from './client';\n\nexport type BlockOption = { id: string; label: string };\n\nexport type BlockPacket = {\n  status: 'blocked';\n  prompt: string;\n  options: BlockOption[];\n  requestedAt: number;\n  requestedByInstanceId?: string;\n};\n\nexport type UnblockAnswer = {\n  answeredAt: number;\n  answeredByUid?: string;\n  optionId?: string;\n  freeText?: string;\n  // Snapshot what the agent asked for (helps audit even if we clear `blocked`).\n  blockedPrompt?: string;\n  blockedOptions?: BlockOption[];\n};\n\nexport type ApprovalStatus = 'NOT_REQUESTED' | 'PENDING' | 'APPROVED' | 'CHANGES_REQUESTED';\n\nexport type ApprovalPacket = {\n  status: ApprovalStatus;\n  requestedAt?: number;\n  requestedByInstanceId?: string;\n  reviewedAt?: number;\n  reviewedByUid?: string;\n  note?: string;\n};\n\nexport type CardDoc = {\n  id: string;\n  boardId: string;\n  title: string;\n  description?: string;\n  priority: 'P0' | 'P1' | 'P2' | 'P3';\n  source: 'TARS' | 'Email' | 'Meeting' | 'Manual';\n  columnId: 'proposed' | 'queued' | 'doing' | 'review' | 'blocked' | 'done';\n  order: number;\n  artifacts?: unknown[];\n  approval?: ApprovalPacket;\n  blocked?: BlockPacket;\n  unblock?: UnblockAnswer;\n  startedDoingAt?: number;\n  movedToReviewAt?: number;\n  timeToReviewMs?: number;\n  reviewDecision?: {\n    outcome: 'approved' | 'changes_requested';\n    decidedAt: number;\n    decidedByUid?: string;\n    instructions?: string;\n  };\n  createdAt: number;\n  updatedAt: number;\n};\n\nfunction cardsRef(workspaceId: string, boardId: string) {\n  const db = firestoreDb();\n  return collection(db, 'workspaces', workspaceId, 'boards', boardId, 'cards');\n}\n\nexport async function listCards(workspaceId: string, boardId: string): Promise<CardDoc[]> {\n  const q = query(cardsRef(workspaceId, boardId), orderBy('order', 'asc'));\n  const snap = await getDocs(q);\n  return snap.docs.map((d) => ({ id: d.id, ...(d.data() as Omit<CardDoc, 'id'>) }));\n}\n\nexport async function createCard(\n  workspaceId: string,\n  boardId: string,\n  input: Omit<CardDoc, 'id' | 'createdAt' | 'updatedAt' | 'boardId'>\n) {\n  // Avoid composite-index requirements: default to time-based ordering.\n  // Reordering can override this later.\n  const ref = await addDoc(cardsRef(workspaceId, boardId), {\n    ...input,\n    boardId,\n    order: Date.now(),\n    createdAt: Date.now(),\n    updatedAt: Date.now(),\n  });\n\n  return ref.id;\n}\n\nexport async function updateCard(\n  workspaceId: string,\n  boardId: string,\n  cardId: string,\n  patch: Record<string, unknown>\n) {\n  const db = firestoreDb();\n  await updateDoc(doc(db, 'workspaces', workspaceId, 'boards', boardId, 'cards', cardId), {\n    ...patch,\n    updatedAt: Date.now(),\n  });\n}\n\nexport async function deleteCard(workspaceId: string, boardId: string, cardId: string) {\n  const db = firestoreDb();\n  await deleteDoc(doc(db, 'workspaces', workspaceId, 'boards', boardId, 'cards', cardId));\n}\n","import { collection, onSnapshot, orderBy, query } from 'firebase/firestore';\nimport { firestoreDb } from './client';\nimport type { CardDoc } from './cards';\n\nexport function subscribeCards(workspaceId: string, boardId: string, cb: (cards: CardDoc[]) => void) {\n  const db = firestoreDb();\n  const q = query(collection(db, 'workspaces', workspaceId, 'boards', boardId, 'cards'), orderBy('order', 'asc'));\n  return onSnapshot(q, (snap) => {\n    cb(snap.docs.map((d) => ({ id: d.id, ...(d.data() as Omit<CardDoc, 'id'>) })));\n  });\n}\n","'use client';\n\nimport { useParams, useRouter } from 'next/navigation';\nimport { useEffect, useMemo, useState } from 'react';\nimport { NavShell } from '@/app/components/NavShell';\nimport { useWorkspace } from '@/lib/firebase/useWorkspace';\nimport { subscribeCards } from '@/lib/firebase/cardsLive';\nimport { type ApprovalPacket, type BlockPacket, type UnblockAnswer, updateCard } from '@/lib/firebase/cards';\nimport { approvalStatusLabel, canApplyApprovalAction, nextApprovalStatus } from '@/lib/approval';\nimport type { ApprovalAction, ApprovalStatus } from '@/lib/approval';\nimport { deleteField } from 'firebase/firestore';\nimport { firebaseAuth } from '@/lib/firebase/client';\n\ntype ArtifactState = 'DRAFT' | 'APPROVED' | 'REJECTED';\n\ntype ArtifactPacket =\n  | { kind: 'text'; text: string }\n  | { kind: 'code'; code: string; language?: string }\n  | { kind: 'file'; fileName: string; url?: string; mimeType?: string; sizeBytes?: number };\n\ntype Artifact = {\n  id: string;\n  title: string;\n  type: string;\n  state: ArtifactState;\n  content?: string;\n  packet?: ArtifactPacket;\n  createdAt: number;\n  updatedAt: number;\n};\n\ntype CardLike = {\n  id: string;\n  title: string;\n  description?: string;\n  priority: string;\n  source: string;\n  columnId: string;\n  order: number;\n  artifacts?: Artifact[];\n  approval?: ApprovalPacket;\n  blocked?: BlockPacket;\n  startedDoingAt?: number;\n  movedToReviewAt?: number;\n  timeToReviewMs?: number;\n  reviewDecision?: {\n    outcome: 'approved' | 'changes_requested';\n    decidedAt: number;\n    decidedByUid?: string;\n    instructions?: string;\n  };\n};\n\nfunction formatBytes(sizeBytes?: number): string {\n  if (!sizeBytes || sizeBytes <= 0) return '—';\n  const units = ['B', 'KB', 'MB', 'GB'];\n  let n = sizeBytes;\n  let u = 0;\n  while (n >= 1024 && u < units.length - 1) {\n    n /= 1024;\n    u += 1;\n  }\n  return `${n.toFixed(n >= 10 ? 0 : 1)} ${units[u]}`;\n}\n\nfunction RenderArtifactPacket({ artifact }: { artifact: Artifact }) {\n  if (artifact.packet?.kind === 'code') {\n    return (\n      <pre className=\"mt-2 max-h-[260px] overflow-auto rounded-xl border border-[color:var(--stroke)] bg-[rgba(10,12,16,.85)] p-3 text-xs\">\n        <code>{artifact.packet.code}</code>\n      </pre>\n    );\n  }\n\n  if (artifact.packet?.kind === 'file') {\n    return (\n      <div className=\"mt-2 rounded-xl border border-[color:var(--stroke)] bg-[rgba(22,26,34,.35)] p-3\">\n        <div className=\"font-bold\">{artifact.packet.fileName}</div>\n        <div className=\"mt-1 text-xs text-[color:var(--muted)]\">\n          {(artifact.packet.mimeType || 'Unknown type') + ' • ' + formatBytes(artifact.packet.sizeBytes)}\n        </div>\n        {artifact.packet.url ? (\n          <a href={artifact.packet.url} target=\"_blank\" rel=\"noreferrer\" className=\"mt-2 inline-block underline text-sm\">\n            Open file\n          </a>\n        ) : null}\n      </div>\n    );\n  }\n\n  if (artifact.packet?.kind === 'text') {\n    return <div className=\"mt-2 whitespace-pre-wrap text-sm text-[color:var(--text)]\">{artifact.packet.text}</div>;\n  }\n\n  if (artifact.content?.trim()) {\n    return <div className=\"mt-2 whitespace-pre-wrap text-sm text-[color:var(--text)]\">{artifact.content}</div>;\n  }\n\n  return <div className=\"mt-2 text-sm text-[color:var(--muted)]\">No preview payload.</div>;\n}\n\nfunction ArtifactRow({ artifact, onUpdate }: { artifact: Artifact; onUpdate: (next: Artifact) => void }) {\n  return (\n    <div className=\"card p-3\">\n      <div className=\"flex items-center justify-between gap-3\">\n        <div>\n          <div className=\"font-extrabold\">{artifact.title}</div>\n          <div className=\"text-xs text-[color:var(--muted)]\">{artifact.type}</div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <span className={`chip ${artifact.state === 'DRAFT' ? 'chip-red' : ''}`}>{artifact.state}</span>\n          <div className=\"flex items-center gap-1\">\n            {(['DRAFT', 'APPROVED', 'REJECTED'] as ArtifactState[]).map((state) => (\n              <button\n                key={state}\n                onClick={() => onUpdate({ ...artifact, state, updatedAt: Date.now() })}\n                className={`px-2 py-1 rounded-lg border text-xs font-bold ${\n                  state === artifact.state\n                    ? 'border-[rgba(91,140,255,.65)] bg-[rgba(91,140,255,.18)]'\n                    : 'border-[color:var(--stroke)] bg-[rgba(22,26,34,.35)]'\n                }`}\n              >\n                {state}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n      <RenderArtifactPacket artifact={artifact} />\n    </div>\n  );\n}\n\nexport default function BoardTaskPage() {\n  const router = useRouter();\n  const params = useParams<{ boardId: string; taskId: string }>();\n  const boardId = decodeURIComponent(params.boardId);\n  const taskId = decodeURIComponent(params.taskId);\n  const { workspaceId } = useWorkspace();\n\n  const [card, setCard] = useState<CardLike | null>(null);\n  const [allCards, setAllCards] = useState<CardLike[]>([]);\n  const [loadedOnce, setLoadedOnce] = useState(false);\n\n  const [selectedOptionId, setSelectedOptionId] = useState<string | null>(null);\n  const [freeText, setFreeText] = useState('');\n  const [submittingUnblock, setSubmittingUnblock] = useState(false);\n\n  const [approvalNote, setApprovalNote] = useState('');\n  const [approvalBusy, setApprovalBusy] = useState(false);\n\n  useEffect(() => {\n    if (!workspaceId) return;\n    const unsub = subscribeCards(workspaceId, boardId, (cards) => {\n      const list = cards as unknown as CardLike[];\n      setAllCards(list);\n      const found = list.find((c) => c.id === taskId) ?? null;\n      setCard(found);\n      setLoadedOnce(true);\n    });\n    return () => unsub();\n  }, [workspaceId, boardId, taskId]);\n\n  const artifacts = useMemo(() => (Array.isArray(card?.artifacts) ? (card!.artifacts as Artifact[]) : []), [card]);\n  const draftCount = useMemo(() => artifacts.filter((a) => a.state === 'DRAFT').length, [artifacts]);\n\n  const approval = card?.approval;\n  const approvalStatus: ApprovalStatus = (approval?.status as ApprovalStatus | undefined) ?? 'NOT_REQUESTED';\n\n  function topOfQueueOrder() {\n    const queuedOrders = allCards.filter((c) => c.columnId === 'queued').map((c) => c.order);\n    const minQueued = queuedOrders.length ? Math.min(...queuedOrders) : NaN;\n    return Number.isFinite(minQueued) ? minQueued - 1 : Date.now();\n  }\n\n  async function updateArtifact(nextArt: Artifact) {\n    if (!workspaceId || !card) return;\n    const nextArtifacts = artifacts.map((a) => (a.id === nextArt.id ? nextArt : a));\n\n    const patch: Record<string, unknown> = { artifacts: nextArtifacts as never };\n\n    // If approved artifacts changed, reset to force a fresh review pass.\n    if (approvalStatus === 'APPROVED') {\n      patch.approval = {\n        status: 'NOT_REQUESTED',\n        note: 'Artifacts changed after approval.',\n      } as ApprovalPacket;\n    }\n\n    await updateCard(workspaceId, boardId, taskId, patch);\n  }\n\n  async function applyApprovalAction(action: ApprovalAction) {\n    if (!workspaceId || !card) return;\n    if (!canApplyApprovalAction(approvalStatus, action)) return;\n\n    if ((action === 'REQUEST_REVIEW' || action === 'APPROVE') && draftCount > 0) {\n      alert('All artifacts must leave DRAFT before review/approval.');\n      return;\n    }\n\n    setApprovalBusy(true);\n    try {\n      const uid = firebaseAuth().currentUser?.uid;\n      const now = Date.now();\n      const next = nextApprovalStatus(approvalStatus, action);\n      const note = approvalNote.trim();\n\n      const nextPacket: ApprovalPacket = {\n        ...(approval || { status: 'NOT_REQUESTED' }),\n        status: next,\n      };\n\n      if (action === 'REQUEST_REVIEW') {\n        nextPacket.requestedAt = now;\n        if (note) nextPacket.note = note;\n      }\n\n      if (action === 'APPROVE' || action === 'REQUEST_CHANGES') {\n        nextPacket.reviewedAt = now;\n        if (uid) nextPacket.reviewedByUid = uid;\n        if (note) nextPacket.note = note;\n      }\n\n      if (action === 'RESET') {\n        nextPacket.note = note || undefined;\n        nextPacket.requestedAt = undefined;\n        nextPacket.reviewedAt = undefined;\n        nextPacket.reviewedByUid = undefined;\n      }\n\n      const patch: Record<string, unknown> = {\n        approval: nextPacket,\n      };\n\n      // Workflow gate: tasks should be moved Doing -> Review before final approval.\n      if (action === 'REQUEST_REVIEW' && card.columnId === 'doing') {\n        patch.columnId = 'review';\n        patch.movedToReviewAt = now;\n        if (typeof card.startedDoingAt === 'number' && now >= card.startedDoingAt) {\n          patch.timeToReviewMs = now - card.startedDoingAt;\n        }\n      }\n\n      // Workflow gate: Review -> Done only via explicit approve action.\n      if (action === 'APPROVE' && card.columnId === 'review') {\n        patch.columnId = 'done';\n        patch.reviewDecision = {\n          outcome: 'approved',\n          decidedAt: now,\n          decidedByUid: uid,\n          instructions: note || undefined,\n        };\n      }\n\n      // Requesting changes from Review sends task back to top of queue with instruction payload.\n      if (action === 'REQUEST_CHANGES' && card.columnId === 'review') {\n        patch.columnId = 'queued';\n        patch.order = topOfQueueOrder();\n        patch.reviewDecision = {\n          outcome: 'changes_requested',\n          decidedAt: now,\n          decidedByUid: uid,\n          instructions: note || undefined,\n        };\n      }\n\n      await updateCard(workspaceId, boardId, taskId, patch);\n      setApprovalNote('');\n    } finally {\n      setApprovalBusy(false);\n    }\n  }\n\n  async function submitUnblock() {\n    if (!workspaceId || !card) return;\n\n    const packet = card.blocked;\n    const opt = selectedOptionId;\n    const txt = freeText.trim();\n\n    if (!opt && !txt) {\n      alert('Select an option or write a response.');\n      return;\n    }\n\n    // Top-of-queue (Option A): set order to minQueuedOrder - 1\n    const nextOrder = topOfQueueOrder();\n\n    setSubmittingUnblock(true);\n    try {\n      const uid = firebaseAuth().currentUser?.uid;\n\n      const unblock: UnblockAnswer = {\n        answeredAt: Date.now(),\n      };\n      if (uid) unblock.answeredByUid = uid;\n      if (opt) unblock.optionId = opt;\n      if (txt) unblock.freeText = txt;\n      if (packet?.prompt) unblock.blockedPrompt = packet.prompt;\n      if (Array.isArray(packet?.options)) unblock.blockedOptions = packet.options;\n\n      await updateCard(workspaceId, boardId, taskId, {\n        columnId: 'queued',\n        order: nextOrder,\n        unblock,\n        blocked: deleteField(),\n      });\n\n      setSelectedOptionId(null);\n      setFreeText('');\n    } catch (e) {\n      const msg = e instanceof Error ? e.message : String(e);\n      alert(`Unblock failed: ${msg}`);\n    } finally {\n      setSubmittingUnblock(false);\n    }\n  }\n\n  if (!workspaceId) {\n    return (\n      <NavShell title=\"Task\">\n        <div className=\"panel p-4 text-[color:var(--muted)]\">Loading…</div>\n      </NavShell>\n    );\n  }\n\n  if (loadedOnce && !card) {\n    return (\n      <NavShell title=\"Task\">\n        <div className=\"panel p-4 text-[color:var(--muted)]\">Task not found in this board.</div>\n        <div className=\"mt-3\">\n          <button\n            onClick={() => router.replace(`/board/${encodeURIComponent(boardId)}`)}\n            className=\"btn-primary px-4 py-3 rounded-2xl font-extrabold\"\n          >\n            Back to board\n          </button>\n        </div>\n      </NavShell>\n    );\n  }\n\n  if (!card) {\n    return (\n      <NavShell title=\"Task\">\n        <div className=\"panel p-4 text-[color:var(--muted)]\">Loading…</div>\n      </NavShell>\n    );\n  }\n\n  return (\n    <NavShell title=\"Task\">\n      <div className=\"flex items-center justify-between gap-3\">\n        <div className=\"text-xs text-[color:var(--muted)]\">Draft-only • approval gated</div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"chip\">Drafts: {draftCount}</div>\n          <div className={`chip ${approvalStatus === 'APPROVED' ? '' : 'chip-red'}`}>Approval: {approvalStatusLabel(approvalStatus)}</div>\n        </div>\n      </div>\n\n      <div className=\"mt-4 panel p-4\">\n        <div className=\"text-xl font-extrabold\">{card.title}</div>\n        <div className=\"mt-3 flex flex-wrap gap-2\">\n          <span className={`chip ${card.priority === 'P0' || card.priority === 'P1' ? 'chip-red' : ''}`}>{card.priority}</span>\n          <span className=\"chip\">Source: {card.source}</span>\n          <span className=\"chip\">Status: {card.columnId}</span>\n          {typeof card.timeToReviewMs === 'number' ? (\n            <span className=\"chip\">Time to review: {Math.max(0, Math.round(card.timeToReviewMs / 60000))}m</span>\n          ) : null}\n        </div>\n\n        <div className=\"mt-4 rounded-2xl border border-[color:var(--stroke)] bg-[rgba(22,26,34,.25)] p-4\">\n          <div className=\"text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold\">Task approval</div>\n          <div className=\"mt-2 text-sm\">{approvalStatusLabel(approvalStatus)}</div>\n          <textarea\n            value={approvalNote}\n            onChange={(e) => setApprovalNote(e.target.value)}\n            placeholder=\"Optional review note…\"\n            className=\"mt-3 w-full min-h-[80px] rounded-2xl bg-[rgba(11,12,15,.7)] border border-[color:var(--stroke)] p-3 outline-none\"\n          />\n          <div className=\"mt-3 flex flex-wrap gap-2\">\n            <button\n              disabled={approvalBusy || !canApplyApprovalAction(approvalStatus, 'REQUEST_REVIEW')}\n              onClick={() => void applyApprovalAction('REQUEST_REVIEW')}\n              className=\"px-4 py-2 rounded-xl border border-[color:var(--stroke)] bg-[rgba(22,26,34,.55)] font-bold disabled:opacity-50\"\n            >\n              Request review\n            </button>\n            <button\n              disabled={approvalBusy || !canApplyApprovalAction(approvalStatus, 'APPROVE')}\n              onClick={() => void applyApprovalAction('APPROVE')}\n              className=\"btn-primary px-4 py-2 rounded-xl font-extrabold disabled:opacity-50\"\n            >\n              Approve\n            </button>\n            <button\n              disabled={approvalBusy || !canApplyApprovalAction(approvalStatus, 'REQUEST_CHANGES')}\n              onClick={() => void applyApprovalAction('REQUEST_CHANGES')}\n              className=\"px-4 py-2 rounded-xl border border-[color:var(--stroke)] bg-[rgba(22,26,34,.55)] font-bold disabled:opacity-50\"\n            >\n              Request changes\n            </button>\n            <button\n              disabled={approvalBusy || !canApplyApprovalAction(approvalStatus, 'RESET')}\n              onClick={() => void applyApprovalAction('RESET')}\n              className=\"px-4 py-2 rounded-xl border border-[color:var(--stroke)] bg-[rgba(22,26,34,.55)] font-bold disabled:opacity-50\"\n            >\n              Reset\n            </button>\n          </div>\n          {approval?.note ? <div className=\"mt-2 text-xs text-[color:var(--muted)]\">Latest note: {approval.note}</div> : null}\n          {card.reviewDecision?.outcome === 'changes_requested' && card.reviewDecision.instructions ? (\n            <div className=\"mt-2 text-xs text-[color:var(--muted)]\">Latest change request: {card.reviewDecision.instructions}</div>\n          ) : null}\n        </div>\n\n        {card.columnId === 'blocked' && card.blocked?.status === 'blocked' ? (\n          <div className=\"mt-4 rounded-2xl border border-[rgba(255,90,120,.35)] bg-[rgba(255,90,120,.08)] p-4\">\n            <div className=\"text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold\">Needs from you</div>\n            <div className=\"mt-2 font-bold\">{card.blocked.prompt}</div>\n\n            {Array.isArray(card.blocked.options) && card.blocked.options.length ? (\n              <div className=\"mt-3 grid gap-2\">\n                {card.blocked.options.map((o) => (\n                  <button\n                    key={o.id}\n                    onClick={() => setSelectedOptionId(o.id)}\n                    aria-pressed={selectedOptionId === o.id}\n                    data-testid={`blocked-opt-${o.id}`}\n                    className={`px-4 py-3 rounded-2xl border font-extrabold text-left ${\n                      selectedOptionId === o.id\n                        ? 'border-[rgba(91,140,255,.65)] bg-[rgba(91,140,255,.18)]'\n                        : 'border-[color:var(--stroke)] bg-[rgba(22,26,34,.35)]'\n                    }`}\n                  >\n                    {o.label}\n                  </button>\n                ))}\n              </div>\n            ) : null}\n\n            <div className=\"mt-3\">\n              <div className=\"text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold\">Or write a response</div>\n              <textarea\n                value={freeText}\n                onChange={(e) => setFreeText(e.target.value)}\n                placeholder=\"Type your answer…\"\n                className=\"mt-1 w-full min-h-[90px] rounded-2xl bg-[rgba(11,12,15,.7)] border border-[color:var(--stroke)] p-4 outline-none\"\n              />\n            </div>\n\n            <div className=\"mt-3 flex items-center justify-between gap-3\">\n              <div className=\"text-xs text-[color:var(--muted)]\">Submitting will move this card to the top of Queue.</div>\n              <button\n                disabled={submittingUnblock}\n                onClick={() => void submitUnblock()}\n                className=\"btn-primary px-4 py-3 rounded-2xl font-extrabold disabled:opacity-50\"\n              >\n                {submittingUnblock ? 'Submitting…' : 'Submit & Re-queue'}\n              </button>\n            </div>\n          </div>\n        ) : null}\n\n        <div className=\"mt-4\">\n          <div className=\"text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold\">Description</div>\n          <div className=\"mt-2 text-sm text-[color:var(--text)] whitespace-pre-wrap\">{card.description ?? '—'}</div>\n        </div>\n      </div>\n\n      <div className=\"mt-4 panel p-4\">\n        <div className=\"text-xs uppercase tracking-wide text-[color:var(--muted)] font-extrabold\">Artifacts</div>\n        <div className=\"mt-3 grid gap-2\">\n          {artifacts.length ? (\n            artifacts.map((a) => <ArtifactRow key={a.id} artifact={a} onUpdate={updateArtifact} />)\n          ) : (\n            <div className=\"text-[color:var(--muted)]\">No artifacts yet.</div>\n          )}\n        </div>\n      </div>\n    </NavShell>\n  );\n}\n","export type ApprovalStatus = 'NOT_REQUESTED' | 'PENDING' | 'APPROVED' | 'CHANGES_REQUESTED';\n\nexport type ApprovalAction = 'REQUEST_REVIEW' | 'APPROVE' | 'REQUEST_CHANGES' | 'RESET';\n\nconst transitions: Record<ApprovalStatus, ApprovalAction[]> = {\n  NOT_REQUESTED: ['REQUEST_REVIEW'],\n  PENDING: ['APPROVE', 'REQUEST_CHANGES', 'RESET'],\n  APPROVED: ['REQUEST_REVIEW', 'RESET'],\n  CHANGES_REQUESTED: ['REQUEST_REVIEW', 'RESET'],\n};\n\nexport function canApplyApprovalAction(status: ApprovalStatus, action: ApprovalAction): boolean {\n  return transitions[status].includes(action);\n}\n\nexport function nextApprovalStatus(status: ApprovalStatus, action: ApprovalAction): ApprovalStatus {\n  if (!canApplyApprovalAction(status, action)) return status;\n\n  if (action === 'REQUEST_REVIEW') return 'PENDING';\n  if (action === 'APPROVE') return 'APPROVED';\n  if (action === 'REQUEST_CHANGES') return 'CHANGES_REQUESTED';\n  return 'NOT_REQUESTED';\n}\n\nexport function approvalStatusLabel(status: ApprovalStatus): string {\n  if (status === 'NOT_REQUESTED') return 'Not requested';\n  if (status === 'PENDING') return 'Pending review';\n  if (status === 'APPROVED') return 'Approved';\n  return 'Changes requested';\n}\n"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","ReactServerDOMTurbopackClient"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK,8BCF9BJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,gBAAgB,+BCFvCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,+BCFzCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACI,kBAAkB,+sBCwBjCP,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEW,eAAe,+BCFxCd,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEY,6BAA6B,+ICFtD,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,MAEA,SAAS,IACP,OAAO,KAAK,GAAG,EACjB,CAMO,eAAe,EAAuB,CAAU,UACrD,IAAM,EAAK,CAAA,EAAA,EAAA,WAAW,AAAX,IACL,EAAU,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAI,QAAS,EAAK,GAAG,EACnC,EAAW,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,GAE9B,GAAI,CAAC,EAAS,MAAM,GAAI,CACtB,IAAM,KAAW,EAAJ,AAAS,GAAG,SATd,GAUL,EAAQ,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAI,aAAc,GAyBpC,OAvBA,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAO,CAClB,GAAI,EACJ,KAAM,CAAA,EAAG,EAAK,WAAW,EAAI,KAAK,UAAU,CAAC,CAC7C,UAAW,IACX,UAAW,GACb,GAEA,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAI,aAAc,EAAM,UAAW,EAAK,GAAG,EAAG,CAC7D,IAAK,EAAK,GAAG,CACb,KAAM,QACN,UAAW,GACb,GAEA,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,EAAS,CACpB,IAAK,EAAK,GAAG,CACb,MAAO,EAAK,KAAK,EAAI,KACrB,YAAa,EAAK,WAAW,EAAI,KACjC,SAAU,EAAK,QAAQ,EAAI,KAC3B,mBAAoB,EACpB,UAAW,IACX,UAAW,GACb,GAEO,CAAE,mBAAoB,CAAK,CACpC,CAEA,IAAM,EAAO,EAAS,IAAI,GAC1B,GAAI,CAAC,EAAK,kBAAkB,CAAE,CAC5B,IAAM,GAzCG,EAyCQ,CAzCG,CAyCP,AAAS,GAAG,CAxCpB,CAAC,GAAG,EAAE,EAAA,CAAK,EA0ChB,OADA,MAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAS,CAAE,mBAAoB,EAAM,UAAW,GAAM,GAC/D,CAAE,mBAAoB,CAAK,CACpC,CAEA,MAAO,CAAE,mBAAoB,EAAK,kBAAkB,AAAC,CACvD,CAEO,eAAe,EAAqB,CAAmB,EAC5D,IAAM,EAAK,CAAA,EAAA,EAAA,WAAA,AAAW,IAChB,EAAI,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAI,aAAc,EAAa,aAAc,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,IAE9E,MAAO,CAAC,CADK,MAAM,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,EAAA,EACd,KAAK,AACpB,4FC5DA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,MACA,EAAA,CAAA,CAAA,OAgBO,SAAS,IACd,GAAM,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,IAAO,AAAgB,eAC/E,CAD+F,AAC9F,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAU,IAAO,CAbC,GA+B5D,MAhBA,CAAA,EAAA,EAAA,CAF2E,OAAO,CAElF,AAAS,EAAC,KAcV,EAAG,EAAE,EAEE,aAAE,YAAa,CAAU,CAClC,qDC1CA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAsEO,eAAe,EACpB,CAAmB,CACnB,CAAe,CACf,CAAkE,QAYlE,MAAO,CARK,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,CAjBnB,EAAK,CAAA,EAAA,EAAA,WAAA,AAAW,IACf,CAAA,EAAA,EAAA,UAAU,AAAV,EAAW,EAAI,aAgBY,CAhBE,CAAa,SAgBF,CAhBY,CAAS,UAgBX,CACvD,GAAG,CAAK,SACR,EACA,MAAO,KAAK,GAAG,GACf,UAAW,KAAK,GAAG,GACnB,UAAW,KAAK,GAAG,EACrB,EAAA,EAEW,EAAE,AACf,CAEO,eAAe,EACpB,CAAmB,CACnB,CAAe,CACf,CAAc,CACd,CAA8B,EAE9B,IAAM,EAAK,CAAA,EAAA,EAAA,WAAA,AAAW,GACtB,OAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAI,aAAc,EAAa,SAAU,EAAS,QAAS,GAAS,CACtF,GAAG,CAAK,CACR,UAAW,KAAK,GAAG,EACrB,EACF,sECpGA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAGO,SAAS,EAAe,CAAmB,CAAE,CAAe,CAAE,CAA8B,EACjG,IAAM,EAAK,CAAA,EAAA,EAAA,WAAA,AAAW,IAChB,EAAI,CAAA,EAAA,EAAA,KAAA,AAAK,EAAC,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAI,aAAc,EAAa,SAAU,EAAS,SAAU,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,QAAS,QACxG,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAG,AAAC,IACpB,EAAG,EAAK,IAAI,CAAC,GAAG,CAAC,AAAC,IAAM,AAAC,CAAE,GAAI,EAAE,EAAE,CAAE,GAAI,EAAE,IAAI,EAAE,CAAyB,CAAC,EAC7E,EACF,wECRA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCHA,IAAM,EAAwD,CAC5D,cAAe,CAAC,iBAAiB,CACjC,QAAS,CAAC,UAAW,kBAAmB,QAAQ,CAChD,SAAU,CAAC,iBAAkB,QAAQ,CACrC,kBAAmB,CAAC,iBAAkB,QAAQ,AAChD,EAEO,SAAS,EAAuB,CAAsB,CAAE,CAAsB,EACnF,OAAO,CAAW,CAAC,EAAO,CAAC,QAAQ,CAAC,EACtC,CAWO,SAAS,EAAoB,CAAsB,QACxD,AAAe,iBAAiB,CAA5B,EAAmC,gBACxB,WAAW,CAAtB,EAA6B,iBAClB,YAAY,CAAvB,EAA8B,WAC3B,mBACT,CDnBA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAsDA,SAAS,EAAqB,UAAE,CAAQ,CAA0B,SAChE,AAAI,EAAS,MAAM,EAAE,OAAS,OAE1B,CAFkC,AAElC,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+HACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAS,MAAM,CAAC,IAAI,KAK7B,EAAS,MAAM,EAAE,OAAS,OAE1B,CAAA,AAFkC,EAElC,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAAa,EAAS,MAAM,CAAC,QAAQ,GACpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACX,AAAD,GAAU,MAAM,CAAC,QAAQ,EAAI,cAAA,CAAc,CAAI,MA1B1D,AA0BkE,SA1BzD,AAAY,CAAkB,EACrC,GAAI,CAAC,GAAa,GAAa,EAAG,MAAO,IACzC,IAAM,EAAQ,CAAC,IAAK,KAAM,KAAM,KAAK,CACjC,EAAI,EACJ,EAAI,EACR,KAAO,GAAK,MAAQ,EAAI,EAAM,MAAM,CAAG,EAAG,CACxC,GAAK,KACL,GAAK,EAEP,MAAO,CAAA,EAAG,EAAE,OAAO,CAAC,GAAK,GAAK,EAAI,GAAG,CAAC,EAAE,CAAK,CAAC,EAAE,CAAA,CAAE,AACpD,EAgB8E,EAAS,MAAM,CAAC,SAAS,IAE9F,EAAS,MAAM,CAAC,GAAG,CAClB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,EAAS,MAAM,CAAC,GAAG,CAAE,OAAO,SAAS,IAAI,aAAa,UAAU,+CAAsC,cAG7G,QAKN,EAAS,MAAM,EAAE,OAAS,OACrB,CAD6B,AAC7B,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qEAA6D,EAAS,MAAM,CAAC,IAAI,GAGrG,EAAS,OAAO,EAAE,OACb,CADqB,AACrB,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qEAA6D,EAAS,OAAO,GAG9F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDAAyC,uBACjE,CAEA,SAAS,EAAY,UAAE,CAAQ,UAAE,CAAQ,CAA8D,EACrG,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BAAkB,EAAS,KAAK,GAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAqC,EAAS,IAAI,MAEnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,KAAK,EAAqB,UAAnB,EAAS,KAAK,CAAe,WAAa,GAAA,CAAI,UAAG,EAAS,KAAK,GACxF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACX,CAAC,QAAS,WAAY,WAAW,CAAqB,GAAG,CAAC,AAAC,GAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAS,CAAE,GAAG,CAAQ,OAAE,EAAO,UAAW,KAAK,GAAG,EAAG,GACpE,UAAW,CAAC,8CAA8C,EACxD,IAAU,EAAS,KAAK,CACpB,0DACA,uDAAA,CACJ,UAED,GARI,YAcf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAqB,SAAU,MAGtC,CAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAU,mBAAmB,EAAO,OAAO,EAC3C,EAAS,mBAAmB,EAAO,MAAM,EACzC,aAAE,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,YAAA,AAAY,IAE9B,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAA0B,MAC5C,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,EAAE,EACjD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEvC,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAClE,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAErD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3C,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAEjD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,EAAa,OAClB,IAAM,EAAQ,CAAA,EAAA,EAAA,cAAc,AAAd,EAAe,EAAa,EAAS,AAAC,IAElD,KAEA,EAHa,AAEC,EAAK,GADP,CACW,AACf,CADgB,AAAC,GAAM,EAAE,EAAE,GAAK,IAAW,MAEnD,GAAc,EAChB,GACA,MAAO,IAAM,GACf,EAAG,CAAC,EAAa,EAAS,EAAO,EAEjC,IAAM,EAAY,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAO,MAAM,OAAO,CAAC,GAAM,WAAc,EAAM,SAAS,CAAkB,EAAE,CAAG,CAAC,EAAK,EACzG,EAAa,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,EAAU,MAAM,CAAC,AAAC,GAAM,AAAY,YAAV,KAAK,EAAc,MAAM,CAAE,CAAC,EAAU,EAE3F,EAAW,GAAM,SACjB,EAAkC,GAAU,QAAyC,gBAE3F,SAAS,IACP,IAAM,EAAe,EAAS,MAAM,CAAE,AAAD,GAAsB,WAAf,EAAE,QAAQ,EAAe,GAAG,CAAC,AAAC,GAAM,EAAE,KAAK,EACjF,EAAY,EAAa,MAAM,CAAG,KAAK,GAAG,IAAI,GAAgB,IACpE,OAAO,OAAO,QAAQ,CAAC,GAAa,EAAY,EAAI,KAAK,GAAG,EAC9D,CAEA,eAAe,EAAe,CAAiB,EAC7C,GAAI,CAAC,GAAe,CAAC,EAAM,OAG3B,IAAM,EAAiC,CAAE,UAFnB,CAE8B,CAFpB,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAQ,EAAE,CAAG,EAAU,EAED,CAGvE,AAAmB,YAAY,MACjC,EAAM,QAAQ,CAAG,CACf,OAAQ,gBACR,KAAM,oCACR,EAGF,MAAM,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAa,EAAS,EAAQ,EACjD,CAEA,eAAe,EAAoB,CAAsB,EACvD,GAAI,AAAC,GAAgB,GAChB,EAAuB,CADD,CACiB,IAE5C,CAHoB,EAGhB,CAAY,CAFqC,kBAEhD,GAA0C,YAAX,CAAW,CAAS,EAAK,EAAa,EAAG,YAC3E,MAAM,0DAIR,GAAgB,GAChB,GAAI,CACF,IAAM,EAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAAG,WAAW,EAAE,IAClC,EAAM,KAAK,GAAG,GACd,EC7LV,AAAK,IAAD,CD6La,EC3Lb,AAAW,gBAFa,EAEK,CD2LmB,EC3LZ,GAFJ,OAGrB,AAAX,EAHyC,OAAO,EAG1B,GAAO,WAC7B,AAAW,mBAAmB,GAAO,oBAClC,gBDwL6B,EAC1B,EAAO,EAAa,IAAI,GAExB,EAA6B,CACjC,GAAI,GAAY,CAAE,OAAQ,eAAgB,CAAC,CAC3C,OAAQ,CACV,EAEe,kBAAkB,CAA7B,IACF,EAAW,WAAW,CAAG,EACrB,IAAM,EAAW,IAAI,CAAG,CAAA,IAGf,YAAX,GAAwB,AAAW,qBAAA,GAAmB,CACxD,EAAW,UAAU,CAAG,EACpB,IAAK,EAAW,aAAa,CAAG,CAAA,EAChC,IAAM,EAAW,IAAI,CAAG,CAAA,GAGf,SAAS,CAApB,IACF,EAAW,IAAI,CAAG,GAAQ,OAC1B,EAAW,WAAW,MAAG,EACzB,EAAW,UAAU,MAAG,EACxB,EAAW,aAAa,CAAG,QAG7B,IAAM,EAAiC,CACrC,SAAU,CACZ,EAGe,mBAAX,GAAiD,SAAS,CAA3B,EAAK,QAAQ,GAC9C,EAAM,QAAQ,CAAG,SACjB,EAAM,eAAe,CAAG,EACW,UAA/B,OAAO,EAAK,cAAc,EAAiB,GAAO,EAAK,cAAc,EAAE,AACzE,GAAM,cAAc,CAAG,EAAM,EAAK,cAAA,AAAc,GAKrC,YAAX,GAA0C,UAAU,CAA5B,EAAK,QAAQ,GACvC,EAAM,QAAQ,CAAG,OACjB,EAAM,cAAc,CAAG,CACrB,QAAS,WACT,UAAW,EACX,aAAc,EACd,aAAc,GAAQ,MACxB,GAIa,oBAAX,GAAkD,UAAU,CAA5B,EAAK,QAAQ,GAC/C,EAAM,QAAQ,CAAG,SACjB,EAAM,KAAK,CAAG,IACd,EAAM,cAAc,CAAG,CACrB,QAAS,oBACT,UAAW,EACX,aAAc,EACd,aAAc,QAAQ,CACxB,GAGF,MAAM,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAa,EAAS,EAAQ,GAC/C,EAAgB,GAClB,QAAU,CACR,GAAgB,EAClB,EACF,CAEA,eAAe,IACb,GAAI,CAAC,GAAe,CAAC,EAAM,OAE3B,IAAM,EAAS,EAAK,OAAO,CAErB,EAAM,EAAS,IAAI,GAEzB,GAAI,CAAC,GAAO,CAAC,EAAK,YAChB,MAAM,yCAKR,IAAM,EAAY,IAElB,GAAqB,GACrB,GAAI,CACF,IAAM,EAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAAG,WAAW,EAAE,IAElC,EAAyB,CAC7B,WAAY,KAAK,GAAG,EACtB,EACI,IAAK,EAAQ,aAAa,CAAG,CAAA,EAC7B,GAAK,GAAQ,QAAQ,CAnBf,CAmBkB,CAAA,CACxB,IAAK,EAAQ,QAAQ,CAAG,CAAA,EACxB,GAAQ,SAAQ,EAAQ,aAAa,CAAG,EAAO,MAAA,AAAM,EACrD,MAAM,OAAO,CAAC,GAAQ,WAAU,EAAQ,cAAc,CAAG,EAAO,OAAA,AAAO,EAE3E,MAAM,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAa,EAAS,EAAQ,CAC7C,SAAU,SACV,MAAO,UACP,EACA,QAAS,CAAA,EAAA,EAAA,WAAA,AAAW,GACtB,GAEA,EAAoB,MACpB,EAAY,GACd,CAAE,MAAO,EAAG,CACV,IAAM,EAAM,aAAa,MAAQ,EAAE,OAAO,CAAG,OAAO,GACpD,MAAM,CAAC,gBAAgB,EAAE,EAAA,CAAK,CAChC,QAAU,CACR,GAAqB,EACvB,CACF,QAEA,AAAK,EAQD,EARA,CAQc,CAAC,EAEf,CAAA,EAAA,CAFqB,CAErB,AAVc,IAUd,EAAC,EAAA,QAAQ,CAAA,CAAC,MAAM,iBACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+CAAsC,kCACrD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,OAAO,CAAC,CAAC,OAAO,EAAE,mBAAmB,GAAA,CAAU,EACrE,UAAU,4DACX,uBAQJ,EASH,CAAA,EAAA,CATS,CAST,IAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,MAAM,iBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAoC,gCACnD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBAAO,WAAS,KAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,KAAK,EAAqB,aAAnB,EAAgC,GAAK,WAAA,CAAY,WAAE,aAAW,EAAoB,YAI9G,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCAA0B,EAAK,KAAK,GACnD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,KAAK,EAAoB,OAAlB,EAAK,QAAQ,EAA+B,OAAlB,EAAK,QAAQ,CAAY,WAAa,GAAA,CAAI,UAAG,EAAK,QAAQ,GAC7G,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,iBAAO,WAAS,EAAK,MAAM,IAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,iBAAO,WAAS,EAAK,QAAQ,IACb,UAA/B,OAAO,EAAK,cAAc,CACzB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,iBAAO,mBAAiB,KAAK,GAAG,CAAC,EAAG,KAAK,KAAK,CAAC,EAAK,cAAc,CAAG,MAAQ,OAC3F,QAGN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oFAA2E,kBAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBAAgB,EAAoB,KACnD,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,YAAY,wBACZ,UAAU,qHAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,SAAU,GAAgB,CAAC,EAAuB,EAAgB,kBAClE,QAAS,IAAM,KAAK,EAAoB,kBACxC,UAAU,0HACX,mBAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,SAAU,GAAgB,CAAC,EAAuB,EAAgB,WAClE,QAAS,IAAM,KAAK,EAAoB,WACxC,UAAU,+EACX,YAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,SAAU,GAAgB,CAAC,EAAuB,EAAgB,mBAClE,QAAS,IAAM,KAAK,EAAoB,mBACxC,UAAU,0HACX,oBAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,SAAU,GAAgB,CAAC,EAAuB,EAAgB,SAClE,QAAS,IAAM,KAAK,EAAoB,SACxC,UAAU,0HACX,aAIF,GAAU,KAAO,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDAAyC,gBAAc,EAAS,IAAI,IAAU,KAC9G,EAAK,cAAc,EAAE,UAAY,qBAAuB,EAAK,cAAc,CAAC,YAAY,CACvF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDAAyC,0BAAwB,EAAK,cAAc,CAAC,YAAY,IAC9G,QAGa,YAAlB,EAAK,QAAQ,EAAkB,EAAK,OAAO,EAAE,SAAW,UACvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gGACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oFAA2E,mBAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BAAkB,EAAK,OAAO,CAAC,MAAM,GAEnD,MAAM,OAAO,CAAC,EAAK,OAAO,CAAC,OAAO,GAAK,EAAK,OAAO,CAAC,OAAO,CAAC,MAAM,CACjE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACZ,EAAK,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,AAAC,GACzB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAoB,EAAE,EAAE,EACvC,eAAc,IAAqB,EAAE,EAAE,CACvC,cAAa,CAAC,YAAY,EAAE,EAAE,EAAE,CAAA,CAAE,CAClC,UAAW,CAAC,sDAAsD,EAChE,IAAqB,EAAE,EAAE,CACrB,0DACA,uDAAA,CACJ,UAED,EAAE,KAAK,EAVH,EAAE,EAAE,KAcb,KAEJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oFAA2E,wBAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAY,oBACZ,UAAU,wHAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAoC,wDACnD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,SAAU,EACV,QAAS,IAAM,KAAK,IACpB,UAAU,gFAET,EAAoB,cAAgB,4BAIzC,KAEJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oFAA2E,gBAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qEAA6D,EAAK,WAAW,EAAI,YAIpG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oFAA2E,cAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACZ,EAAU,MAAM,CACf,EAAU,GAAG,CAAC,AAAC,GAAM,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAuB,SAAU,EAAG,SAAU,GAA7B,EAAE,EAAE,GAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA4B,8BApIjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,MAAM,gBACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+CAAsC,eAzBvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,MAAM,gBACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+CAAsC,cAiK7D","ignoreList":[0,1,2,3,4,5,6]}