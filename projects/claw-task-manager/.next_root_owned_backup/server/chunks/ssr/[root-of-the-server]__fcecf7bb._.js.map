{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../src/app/sign-in/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","'use client';\n\nimport { GoogleAuthProvider, signInWithPopup, signInWithRedirect } from 'firebase/auth';\nimport { useRouter } from 'next/navigation';\nimport { useState } from 'react';\nimport { firebaseAuth } from '@/lib/firebase/client';\n\nfunction normalizeFirebaseError(e: unknown): { code?: string; message: string } {\n  if (e && typeof e === 'object') {\n    const anyErr = e as { code?: unknown; message?: unknown };\n    const code = typeof anyErr.code === 'string' ? anyErr.code : undefined;\n    const message = typeof anyErr.message === 'string' ? anyErr.message : 'Sign-in failed.';\n    return { code, message };\n  }\n  return { message: 'Sign-in failed.' };\n}\n\nexport default function SignInPage() {\n  const router = useRouter();\n  const [error, setError] = useState<string | null>(null);\n  const [busy, setBusy] = useState(false);\n\n  async function signIn() {\n    setError(null);\n    setBusy(true);\n\n    try {\n      const auth = firebaseAuth();\n      const provider = new GoogleAuthProvider();\n\n      try {\n        await signInWithPopup(auth, provider);\n      } catch (e) {\n        const { code, message } = normalizeFirebaseError(e);\n\n        // Mobile browsers frequently block popups; redirect is more reliable.\n        if (code === 'auth/popup-blocked' || code === 'auth/popup-closed-by-user') {\n          await signInWithRedirect(auth, provider);\n          return;\n        }\n\n        // Most common LAN-dev failure: OAuth redirect domain not authorized.\n        if (code === 'auth/unauthorized-domain') {\n          throw new Error(\n            `This URL isn't authorized for Google sign-in in Firebase Auth. Add this domain to Firebase Console → Authentication → Settings → Authorized domains, then retry.\\n\\nDetails: ${message}`,\n          );\n        }\n\n        throw e;\n      }\n\n      router.replace('/');\n    } catch (e) {\n      const { message } = normalizeFirebaseError(e);\n      setError(message);\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen flex items-center justify-center p-6\">\n      <div className=\"w-full max-w-md panel p-6\">\n        <div className=\"text-xs text-[color:var(--muted)]\">TARS</div>\n        <h1 className=\"text-2xl font-extrabold\">Sign in</h1>\n        <p className=\"mt-2 text-sm text-[color:var(--muted)]\">\n          Use Google to sign in. Workspaces and bot instances are scoped to your account.\n        </p>\n\n        {error ? (\n          <div className=\"mt-4 rounded-2xl border border-red-500/30 bg-red-500/10 p-3 text-sm\">\n            <div className=\"font-extrabold\">Sign-in error</div>\n            <div className=\"mt-1 whitespace-pre-wrap text-[color:var(--muted)]\">{error}</div>\n          </div>\n        ) : null}\n\n        <button\n          onClick={signIn}\n          disabled={busy}\n          className=\"mt-5 w-full btn-primary px-4 py-3 rounded-2xl font-extrabold disabled:opacity-60\"\n        >\n          {busy ? 'Signing in…' : 'Continue with Google'}\n        </button>\n\n        <div className=\"mt-4 text-xs text-[color:var(--muted)]\">\n          Note: This app does not send messages or perform external actions without approval.\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}